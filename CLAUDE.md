# FE Master 開発ガイドライン

> このファイルはプロジェクトルートに配置してください。
> Claude Code がこのプロジェクトで作業する際に、自動的に読み込まれるルールブックです。

## プロジェクト概要

- **プロダクト名**: FE Master（基本情報技術者試験 対策アプリ）
- **リポジトリ**: https://github.com/junhnam/FElearning
- **要件定義書**: `docs/FE対策アプリ_要件定義書.md`（このファイルが正とする）
- **技術スタック**: Electron + React + TypeScript + Tailwind CSS
- **開発者**: junhnam（QA エンジニア。開発経験なし。Claude Code に実装を委任）

---

## 最重要ルール：要件準拠の徹底

このプロジェクトでは **要件定義書が唯一の正（Single Source of Truth）** です。
すべての実装判断は要件定義書に基づいて行うこと。

### やってはいけないこと

- 要件定義書に記載のない機能を勝手に追加しない
- 要件定義書の仕様と異なる実装をしない（判断に迷ったらユーザーに確認する）
- Phase をまたぐ実装を先走って行わない
- 既存の動作を壊すリファクタリングを無断で行わない

### 判断に迷ったら

要件定義書に書かれていない仕様や、解釈が分かれる部分があった場合は：
1. 実装を進めずに一旦止める
2. ユーザー（jun）に選択肢を提示して確認を取る
3. 決定事項を `docs/decisions.md` に記録する

---

## 開発フロー

### Phase 構成

```
Phase 1（MVP）→ Phase 2（コンテンツ拡充）→ Phase 3（機能拡充）→ Phase 4（ポリッシュ）
```

各 Phase の詳細な内容は要件定義書のセクション 11 を参照すること。

### 各 Phase の作業フロー

```
1. Phase 開始時
   ├── 要件定義書の該当セクションを再読する
   ├── その Phase で実装すべき項目をリスト化する
   └── 実装計画をユーザーに提示して承認を得る

2. 実装中
   ├── 機能単位でコミットする（1コミット = 1機能 or 1修正）
   ├── コミットメッセージは日本語で、何を実装したか明確に書く
   └── 定期的に git push origin main する

3. Phase 完了時
   ├── 要件チェックリストで全項目を確認する（下記参照）
   ├── チェック結果を docs/phase-review/ に記録する
   ├── ユーザーにレビューを依頼する
   └── 承認を得てから次の Phase に進む
```

---

## Git 運用ルール

### ブランチ戦略

- **main**: 常に動作する状態を保つ
- **feature/xxx**: 機能単位のブランチ（例: `feature/level-system`, `feature/resume-viewer`）
- 各 feature ブランチは main にマージ後に削除する

### コミットルール

```
コミットメッセージのフォーマット:
[Phase番号] カテゴリ: 変更内容の要約

カテゴリ:
  feat:     新機能の追加
  fix:      バグ修正
  content:  コンテンツ（問題・レジュメ）の追加・修正
  style:    UI・デザインの変更
  refactor: リファクタリング（機能変更なし）
  docs:     ドキュメントの追加・修正
  test:     テストの追加・修正
  chore:    ビルド設定、依存関係などの雑務

例:
  [Phase1] feat: サイドバーナビゲーションを実装
  [Phase1] feat: レベルシステムの基本ロジックを実装
  [Phase2] content: セキュリティ分野の問題 Lv.1-5 を追加（40問）
  [Phase3] feat: ダッシュボードのレーダーチャートを実装
  [Phase4] style: ダークモードの配色調整
```

### Push / Pull のタイミング

- **Push**: 以下のタイミングで必ず `git push origin main`（または feature ブランチ）を実行
  - 機能単位の実装が完了したとき
  - 作業セッションの終了時
  - Phase 完了時
  - コンテンツ（問題・レジュメ）のバッチ追加後

- **Pull**: 以下のタイミングで必ず `git pull origin main` を実行
  - 作業セッション開始時（最初のコマンド）
  - feature ブランチを main にマージする前
  - 長時間の作業の合間（念のため）

### .gitignore に含めるべきもの

```
node_modules/
dist/
out/
.DS_Store
*.log
userData/  # ユーザーのローカル学習データ
```

---

## Phase 完了時の要件チェックリスト

### Phase 1 チェックリスト

```
[ ] Electron + React プロジェクトが正常にビルド・起動できる
[ ] サイドバーナビゲーションで全画面に遷移できる
[ ] レジュメが表示できる（3〜5セクション分）
    [ ] たとえ話付きの概要が表示されるか
    [ ] 重要用語リストが表示されるか
    [ ] 関連問題へのリンクが機能するか
[ ] 練習問題が動作する（50問程度）
    [ ] 4択の選択肢が表示されるか
    [ ] 回答後に解説が表示されるか
    [ ] 正解/不正解の全選択肢に解説があるか
    [ ] たとえ話が含まれているか
[ ] レベルシステムが動作する
    [ ] 3問連続正解でレベルアップするか
    [ ] 3問連続不正解でレベルダウンするか
    [ ] カテゴリ別にレベルが管理されているか
    [ ] 現在のレベルが画面に表示されているか
[ ] ユーザーデータがローカルに保存される
    [ ] アプリを再起動しても進捗が保持されるか
[ ] 要件定義書の仕様と矛盾する実装がないか
```

### Phase 2 チェックリスト

```
[ ] レジュメ: テクノロジ系の全セクションが揃っているか
[ ] レジュメ: マネジメント系の全セクションが揃っているか
[ ] レジュメ: ストラテジ系の全セクションが揃っているか
[ ] レジュメ: 科目B対応レジュメが揃っているか
[ ] 問題: 科目A 700問が揃っているか
    [ ] 各カテゴリの問題数が配分表と一致するか
    [ ] 各レベル（1-10）に問題が均等に分布しているか
[ ] 問題: 科目B 300問が揃っているか
    [ ] 擬似言語問題にトレース表があるか
    [ ] 情報セキュリティ問題が含まれているか
[ ] 全問題に「たとえ話付き解説」があるか
[ ] 全問題に「不正解の理由」があるか
[ ] 図解が必要なレジュメセクションに図解があるか
[ ] 要件定義書のコンテンツ作成ガイドライン（セクション9）に準拠しているか
```

### Phase 3 チェックリスト

```
[ ] ダッシュボードに以下が表示されるか
    [ ] 総合レベル
    [ ] カテゴリ別レベル（グラフ表示）
    [ ] 学習進捗
    [ ] 連続学習日数
    [ ] 苦手カテゴリ
    [ ] おすすめアクション
[ ] 学習進捗管理が動作するか
[ ] ブックマーク機能（追加・削除・一覧）が動作するか
[ ] 苦手問題管理が動作するか
[ ] 間隔反復学習（間違えた問題の再出題）が動作するか
[ ] 模擬試験モードが動作するか
    [ ] タイマーが表示されるか
    [ ] 結果画面にスコアが表示されるか
[ ] ダークモードが切り替わるか
[ ] データエクスポート/インポートが動作するか
[ ] 要件定義書のセクション5.4（出題ロジック）通りに動作するか
```

### Phase 4 チェックリスト

```
[ ] アニメーション（正解/不正解/レベルアップ）が動作するか
[ ] アプリの起動が3秒以内か
[ ] メモリ使用量が500MB以下か
[ ] Mac向け .app / .dmg がビルドできるか
[ ] 初回起動のオンボーディングが動作するか
[ ] エラーハンドリング（データ破損時等）が適切か
[ ] 全体を通して要件定義書との乖離がないか（最終確認）
```

---

## コンテンツ作成のルール

### 問題データ（JSON）の作成

- 要件定義書セクション 5.2 の JSON フォーマットに**厳密に**従うこと
- 1ファイルあたり最大 50 問を目安に分割する
- ファイル命名規則: `{カテゴリ}-lv{開始レベル}-lv{終了レベル}.json`
  - 例: `security-lv01-lv05.json`, `algorithm-lv06-lv10.json`
- 作成後のセルフチェック:
  - JSON が valid であること（パースエラーがないこと）
  - 全問に `explanation` が含まれていること
  - 全選択肢に `analogy`（たとえ話）が含まれていること
  - `isCorrect: true` が各問に 1 つだけあること
  - `level` が 1〜10 の範囲内であること

### レジュメデータ（JSON）の作成

- 要件定義書セクション 4.5 の JSON フォーマットに従うこと
- 各セクションの `overview.analogy` は必須（たとえ話で始める）
- `keyTerms` の各用語にも `analogy` を付ける
- `relatedQuestions` には実在する questionId を指定する

---

## テスト方針

- Phase 1 完了時点で、手動テスト項目リストを作成する
- レベルシステムのロジックには単体テストを書く（Jest）
- 問題データの整合性チェックスクリプトを作成する
  - JSON バリデーション
  - 必須フィールドの存在確認
  - questionId の重複チェック
  - レベル分布の確認

---

## ディレクトリ構成（推奨）

```
FElearning/
├── CLAUDE.md                          # ← このファイル
├── README.md
├── package.json
├── tsconfig.json
├── electron-builder.yml
├── docs/
│   ├── FE対策アプリ_要件定義書.md      # 要件定義書（正）
│   ├── decisions.md                   # 仕様判断の記録
│   └── phase-review/                  # Phase完了レビュー記録
│       ├── phase1-review.md
│       ├── phase2-review.md
│       └── ...
├── src/
│   ├── main/                          # Electron メインプロセス
│   │   ├── main.ts
│   │   └── preload.ts
│   ├── renderer/                      # React フロントエンド
│   │   ├── App.tsx
│   │   ├── components/
│   │   ├── pages/
│   │   ├── hooks/
│   │   ├── stores/                    # 状態管理
│   │   ├── types/                     # TypeScript 型定義
│   │   └── utils/
│   └── shared/                        # メイン/レンダラ共通の型・定数
├── data/
│   ├── resume/                        # レジュメ JSON
│   ├── questions/                     # 問題 JSON
│   └── metadata/                      # カテゴリ定義等
├── scripts/
│   └── validate-data.ts               # データ整合性チェックスクリプト
└── tests/
    ├── unit/                          # 単体テスト
    └── data-validation/               # データバリデーションテスト
```

---

## セッション開始時のチェックリスト

Claude Code で作業を開始するたびに、以下を実行すること：

```bash
# 1. 最新のコードを取得
git pull origin main

# 2. 依存関係の確認
npm install

# 3. ビルドが通ることを確認
npm run build

# 4. 現在のPhaseと残タスクを確認
# → docs/FE対策アプリ_要件定義書.md のセクション11を参照
# → 前回のセッションで何をしたか git log で確認
```

## セッション終了時のチェックリスト

```bash
# 1. 変更をコミット
git add .
git commit -m "[PhaseX] カテゴリ: 変更内容"

# 2. リモートに push
git push origin main

# 3. 現在の進捗をユーザーに報告
# → 何を実装したか、次に何をすべきかを伝える
```

---

## 注意事項

- このプロジェクトの開発者（jun）は IT エンジニアではないため、技術的な判断はすべて Claude Code が行う
- ただし、**仕様に関する判断**はユーザーに確認を取ること
- コードの品質よりも「要件通りに動くこと」を優先する
- 日本語のコメントを積極的に書くこと（ユーザーがコードを読む可能性があるため）
- エラーメッセージも日本語で表示すること
